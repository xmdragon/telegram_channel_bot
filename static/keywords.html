<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂÖ≥ÈîÆËØçÁÆ°ÁêÜ - TelegramÊ∂àÊÅØÂÆ°Ê†∏Á≥ªÁªü</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîç</text></svg>">
    
    <!-- Â§ñÈÉ®Ê†∑ÂºèÊñá‰ª∂ -->
    <link rel="stylesheet" href="assets/css/element-plus.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/starcraft.css">
    <link rel="stylesheet" href="assets/css/components/keywords.css">
    
</head>
<body>
    <div id="app">
        <!-- ÂØºËà™Ê†è -->
        <nav-bar page-title="üîç ÂÖ≥ÈîÆËØçÁÆ°ÁêÜ‰∏≠ÂøÉ" page-subtitle="ÂπøÂëäËøáÊª§ ¬∑ ÂÜÖÂÆπÁ≠õÈÄâ ¬∑ Êô∫ËÉΩËØÜÂà´"></nav-bar>

        <div class="container">
            <!-- ÂÖ≥ÈîÆËØçÁÆ°ÁêÜÊ†áÁ≠æÈ°µ -->
            <el-tabs v-model="activeTab" type="border-card" class="config-tabs">
                <!-- ÂÖ≥ÈîÆËØçÂàóË°® -->
                <el-tab-pane label="üìù ÂÖ≥ÈîÆËØçÂàóË°®" name="list">
                    <div class="config-section">
                        <!-- Â∑•ÂÖ∑Ê†è -->
                        <div class="toolbar">
                            <div class="filter-group">
                                <el-input
                                    v-model="searchKeyword"
                                    placeholder="ÊêúÁ¥¢ÂÖ≥ÈîÆËØç"
                                    prefix-icon="Search"
                                    @input="filterKeywords"
                                    clearable
                                    style="width: 350px; margin-right: 10px;">
                                </el-input>
                                
                                <el-select
                                    v-model="filterType"
                                    placeholder="ÈÄâÊã©Á±ªÂûã"
                                    @change="filterKeywords"
                                    clearable
                                    style="width: 120px; margin-right: 10px;">
                                    <el-option label="Êñá‰∏≠ÂÖ≥ÈîÆËØç" value="text"></el-option>
                                    <el-option label="Ë°åËøáÊª§ÂÖ≥ÈîÆËØç" value="line"></el-option>
                                </el-select>
                                
                                <el-select
                                    v-model="filterStatus"
                                    placeholder="ÈÄâÊã©Áä∂ÊÄÅ"
                                    @change="filterKeywords"
                                    clearable
                                    style="width: 100px; margin-right: 10px;">
                                    <el-option label="ÂêØÁî®" :value="true"></el-option>
                                    <el-option label="Á¶ÅÁî®" :value="false"></el-option>
                                </el-select>
                                
                                <el-button type="primary" @click="loadKeywords" icon="Refresh">Âà∑Êñ∞</el-button>
                            </div>
                            
                            <div class="action-group">
                                <el-button 
                                    type="success" 
                                    @click="showAddDialog" 
                                    icon="Plus">
                                    Ê∑ªÂä†ÂÖ≥ÈîÆËØç
                                </el-button>
                                <el-button 
                                    type="warning" 
                                    @click="showBatchImportDialog" 
                                    icon="Upload">
                                    ÊâπÈáèÂØºÂÖ•
                                </el-button>
                                <el-button 
                                    type="danger" 
                                    @click="batchDelete"
                                    :disabled="selectedKeywords.length === 0"
                                    icon="Delete">
                                    ÊâπÈáèÂà†Èô§ ({{ selectedKeywords.length }})
                                </el-button>
                            </div>
                        </div>

                        <!-- ÂÖ≥ÈîÆËØçË°®Ê†º -->
                        <el-table 
                            :data="filteredKeywords" 
                            @selection-change="handleSelectionChange"
                            stripe 
                            border
                            :header-cell-style="{ background: '#1a1a2e', color: '#00ff41' }"
                            :row-style="{ background: '#16213e' }"
                            style="width: 100%">
                            
                            <el-table-column type="selection" width="55"></el-table-column>
                            
                            <el-table-column prop="keyword" label="ÂÖ≥ÈîÆËØç" min-width="200">
                                <template #default="scope">
                                    <el-tag :type="scope.row.keyword_type === 'text' ? 'danger' : 'warning'">
                                        {{ scope.row.keyword }}
                                    </el-tag>
                                </template>
                            </el-table-column>
                            
                            <el-table-column prop="keyword_type" label="Á±ªÂûã" width="120">
                                <template #default="scope">
                                    <span v-if="scope.row.keyword_type === 'text'">
                                        <i class="el-icon-warning-outline"></i> Êñá‰∏≠ÂÖ≥ÈîÆËØç
                                    </span>
                                    <span v-else>
                                        <i class="el-icon-filter"></i> Ë°åËøáÊª§
                                    </span>
                                </template>
                            </el-table-column>
                            
                            <el-table-column prop="description" label="ÊèèËø∞" min-width="200">
                                <template #default="scope">
                                    <span style="color: #7fdbff;">{{ scope.row.description || 'Êó†ÊèèËø∞' }}</span>
                                </template>
                            </el-table-column>
                            
                            <el-table-column prop="is_active" label="Áä∂ÊÄÅ" width="100">
                                <template #default="scope">
                                    <el-switch 
                                        v-model="scope.row.is_active"
                                        @change="toggleKeywordStatus(scope.row)">
                                    </el-switch>
                                </template>
                            </el-table-column>
                            
                            <el-table-column label="Êìç‰Ωú" width="180">
                                <template #default="scope">
                                    <el-button 
                                        type="primary" 
                                        size="small"
                                        @click="editKeyword(scope.row)"
                                        icon="Edit">
                                        ÁºñËæë
                                    </el-button>
                                    <el-button 
                                        type="danger" 
                                        size="small"
                                        @click="deleteKeyword(scope.row)"
                                        icon="Delete">
                                        Âà†Èô§
                                    </el-button>
                                </template>
                            </el-table-column>
                        </el-table>

                        <!-- ÂàÜÈ°µ -->
                        <div class="pagination-wrapper">
                            <el-pagination
                                @size-change="handleSizeChange"
                                @current-change="handleCurrentChange"
                                :current-page="currentPage"
                                :page-sizes="[10, 20, 50, 100]"
                                :page-size="pageSize"
                                layout="total, sizes, prev, pager, next, jumper"
                                :total="totalKeywords">
                            </el-pagination>
                        </div>
                    </div>
                </el-tab-pane>

                <!-- ÁªüËÆ°‰ø°ÊÅØ -->
                <el-tab-pane label="üìä ÁªüËÆ°‰ø°ÊÅØ" name="stats">
                    <div class="config-section">
                        <h3>ÂÖ≥ÈîÆËØçÁªüËÆ°</h3>
                        <el-row :gutter="20">
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-value">{{ stats.total }}</div>
                                    <div class="stat-label">ÊÄªÂÖ≥ÈîÆËØçÊï∞</div>
                                </el-card>
                            </el-col>
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-value">{{ stats.textKeywords }}</div>
                                    <div class="stat-label">Êñá‰∏≠ÂÖ≥ÈîÆËØç</div>
                                </el-card>
                            </el-col>
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-value">{{ stats.lineKeywords }}</div>
                                    <div class="stat-label">Ë°åËøáÊª§ÂÖ≥ÈîÆËØç</div>
                                </el-card>
                            </el-col>
                            <el-col :span="6">
                                <el-card class="stat-card">
                                    <div class="stat-value">{{ stats.activeKeywords }}</div>
                                    <div class="stat-label">ÂêØÁî®ÂÖ≥ÈîÆËØç</div>
                                </el-card>
                            </el-col>
                        </el-row>
                    </div>
                </el-tab-pane>
            </el-tabs>
        </div>
        
        <!-- Ê∑ªÂä†/ÁºñËæëÂÖ≥ÈîÆËØçÂØπËØùÊ°Ü -->
        <el-dialog 
            :title="dialogMode === 'add' ? 'Ê∑ªÂä†ÂÖ≥ÈîÆËØç' : 'ÁºñËæëÂÖ≥ÈîÆËØç'"
            v-model="dialogVisible"
            width="500px">
            <el-form :model="keywordForm" :rules="keywordRules" ref="keywordFormRef" label-width="100px">
                <el-form-item label="ÂÖ≥ÈîÆËØç" prop="keyword">
                    <el-input v-model="keywordForm.keyword" placeholder="ËØ∑ËæìÂÖ•ÂÖ≥ÈîÆËØç"></el-input>
                </el-form-item>
                <el-form-item label="Á±ªÂûã" prop="keyword_type">
                    <el-radio-group v-model="keywordForm.keyword_type">
                        <el-radio label="text">Êñá‰∏≠ÂÖ≥ÈîÆËØçÔºàÊ£ÄÊµãÂà∞Âà§ÂÆö‰∏∫ÂπøÂëäÔºâ</el-radio>
                        <el-radio label="line">Ë°åËøáÊª§ÂÖ≥ÈîÆËØçÔºàËøáÊª§ËØ•Ë°åÂÜÖÂÆπÔºâ</el-radio>
                    </el-radio-group>
                </el-form-item>
                <el-form-item label="ÊèèËø∞" prop="description">
                    <el-input 
                        v-model="keywordForm.description" 
                        type="textarea" 
                        placeholder="ËØ∑ËæìÂÖ•ÂÖ≥ÈîÆËØçÊèèËø∞ÔºàÂèØÈÄâÔºâ">
                    </el-input>
                </el-form-item>
                <el-form-item label="Áä∂ÊÄÅ" prop="is_active">
                    <el-switch v-model="keywordForm.is_active"></el-switch>
                    <span style="margin-left: 10px; color: #7fdbff;">
                        {{ keywordForm.is_active ? 'ÂêØÁî®' : 'Á¶ÅÁî®' }}
                    </span>
                </el-form-item>
            </el-form>
            <template #footer>
                <span class="dialog-footer">
                    <el-button @click="dialogVisible = false">ÂèñÊ∂à</el-button>
                    <el-button type="primary" @click="saveKeyword" :loading="saving">Á°ÆÂÆö</el-button>
                </span>
            </template>
        </el-dialog>

        <!-- ÊâπÈáèÂØºÂÖ•ÂØπËØùÊ°Ü -->
        <el-dialog title="ÊâπÈáèÂØºÂÖ•ÂÖ≥ÈîÆËØç" v-model="batchImportVisible" width="600px">
            <el-form :model="batchForm" label-width="100px">
                <el-form-item label="ÂÖ≥ÈîÆËØçÁ±ªÂûã">
                    <el-radio-group v-model="batchForm.keyword_type">
                        <el-radio label="text">Êñá‰∏≠ÂÖ≥ÈîÆËØç</el-radio>
                        <el-radio label="line">Ë°åËøáÊª§ÂÖ≥ÈîÆËØç</el-radio>
                    </el-radio-group>
                </el-form-item>
                <el-form-item label="ÂÖ≥ÈîÆËØçÂàóË°®">
                    <el-input 
                        v-model="batchForm.keywords" 
                        type="textarea" 
                        :rows="8"
                        placeholder="ËØ∑ËæìÂÖ•ÂÖ≥ÈîÆËØçÔºåÊØèË°å‰∏Ä‰∏™">
                    </el-input>
                    <div style="color: #888; font-size: 12px; margin-top: 5px;">
                        ÊØèË°åËæìÂÖ•‰∏Ä‰∏™ÂÖ≥ÈîÆËØçÔºåÊîØÊåÅÊâπÈáèÂØºÂÖ•
                    </div>
                </el-form-item>
            </el-form>
            <template #footer>
                <span class="dialog-footer">
                    <el-button @click="batchImportVisible = false">ÂèñÊ∂à</el-button>
                    <el-button type="primary" @click="batchImport" :loading="batchImporting">ÂØºÂÖ•</el-button>
                </span>
            </template>
        </el-dialog>
        
        <!-- Áä∂ÊÄÅÊ∂àÊÅØ -->
        <div v-if="statusMessage" class="status-message" :class="statusType">
            {{ statusMessage }}
        </div>
        
        <!-- Âä†ËΩΩÈÅÆÁΩ© -->
        <div v-if="loading" class="loading-overlay">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p>{{ loadingMessage }}</p>
            </div>
        </div>
    </div>
    
    <!-- Â§ñÈÉ®ËÑöÊú¨Êñá‰ª∂ -->
    <script src="assets/js/vue.prod.js?v=3"></script>
    <script src="assets/js/element-plus.js?v=3"></script>
    <script src="assets/js/axios.js?v=3"></script>
    <script src="assets/js/components/navbar.js"></script>
    <script src="assets/js/message-manager.js?v=1"></script>
    <script src="assets/js/components/keywords.js?v=3"></script>
</body>
</html>