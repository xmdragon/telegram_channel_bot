<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram ç™»å½•</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”</text></svg>">
    
    <!-- CSS åŠ è½½é¡ºåºï¼šElement Plus -> Main -> Starcraftä¸»é¢˜ -> ç»„ä»¶æ ·å¼ -->
    <link rel="stylesheet" href="assets/css/element-plus.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/starcraft.css">
    <link rel="stylesheet" href="assets/css/components/auth.css">
    
    <!-- JavaScript åº“ -->
    <script src="assets/js/vue.prod.js"></script>
    <script src="assets/js/element-plus.js"></script>
    <script src="assets/js/axios.js"></script>
    <script src="assets/js/components/navbar.js"></script>
    <script src="assets/js/components/auth.js"></script>
</head>
<body>
    <div id="app">
        <div class="header">
            <h1>ğŸ” Telegram è®¤è¯ç³»ç»Ÿ</h1>
            <p>å®‰å…¨ç™»å½• Â· èº«ä»½éªŒè¯ Â· ç³»ç»Ÿæ¥å…¥</p>
        </div>

        <!-- å¯¼èˆªæ  -->
        <nav-bar></nav-bar>

        <div class="container">
            <div class="form-container">
                <div class="form-title">Telegram è®¤è¯</div>
                
                <!-- å·²ä¿å­˜çš„è®¤è¯ä¿¡æ¯ -->
                <div v-if="showSavedInfo" class="saved-auth-info">
                    <h3 style="color: #00ff41; margin-bottom: 20px;">å·²ä¿å­˜çš„è®¤è¯ä¿¡æ¯</h3>
                    <div class="auth-info-item">
                        <label>API ID:</label>
                        <span>{{ savedAuthInfo.api_id }}</span>
                    </div>
                    <div class="auth-info-item">
                        <label>API Hash:</label>
                        <span>{{ savedAuthInfo.api_hash ? 'â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—' : '' }}</span>
                    </div>
                    <div style="text-align: center; margin-top: 30px;">
                        <el-button @click="clearAuthData" type="danger" :loading="loading">
                            æ¸…é™¤è®¤è¯æ•°æ®
                        </el-button>
                    </div>
                </div>
                
                <!-- æ­¥éª¤æŒ‡ç¤ºå™¨ -->
                <div v-if="!showSavedInfo" class="step-indicator">
                    <div class="step" :class="{ active: currentStep >= 1, completed: currentStep > 1 }">é…ç½®</div>
                    <div class="step-line"></div>
                    <div class="step" :class="{ active: currentStep >= 2, completed: currentStep > 2 }">æ‰‹æœº</div>
                    <div class="step-line"></div>
                    <div class="step" :class="{ active: currentStep >= 3, completed: currentStep > 3 }">éªŒè¯</div>
                    <div class="step-line"></div>
                    <div class="step" :class="{ active: currentStep >= 4, completed: currentStep > 4 }">ä¸¤æ­¥</div>
                    <div class="step-line"></div>
                    <div class="step" :class="{ active: currentStep >= 5, completed: currentStep > 5 }">å®Œæˆ</div>
                </div>

                <!-- æ­¥éª¤1: é…ç½®ä¿¡æ¯ -->
                <div v-if="!showSavedInfo" class="form-step" :class="{ active: currentStep === 1 }">
                    <div class="form-group">
                        <label class="form-label">API ID</label>
                        <el-input 
                            v-model="config.api_id" 
                            placeholder="è¯·è¾“å…¥ Telegram API ID"
                            type="text"
                            style="background: rgba(26, 26, 46, 0.95) !important; border: 2px solid #00ff41 !important;">
                        </el-input>
                        <!-- è°ƒè¯•ä¿¡æ¯ -->
                        <div style="margin-top: 5px; font-size: 12px; color: #7fdbff;">
                            å½“å‰å€¼: {{ config.api_id || 'ç©º' }}
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">API Hash</label>
                        <el-input 
                            v-model="config.api_hash" 
                            placeholder="è¯·è¾“å…¥ Telegram API Hash"
                            type="password">
                        </el-input>
                    </div>
                    
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <el-button @click="submitConfig" type="primary" :disabled="!canProceed" :loading="loading">
                            æäº¤é…ç½®
                        </el-button>
                    </div>
                </div>

                <!-- æ­¥éª¤2: æ‰‹æœºå·ç  -->
                <div v-if="!showSavedInfo" class="form-step" :class="{ active: currentStep === 2 }">
                    <div class="form-group">
                        <label class="form-label">æ‰‹æœºå·ç </label>
                        <el-input 
                            v-model="config.phone" 
                            placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç  (æ ¼å¼: +8613800138000)"
                            type="text">
                        </el-input>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <el-button @click="prevStep" type="info">
                            ä¸Šä¸€æ­¥
                        </el-button>
                        <el-button @click="sendCode" type="primary" :loading="loading">
                            å‘é€éªŒè¯ç 
                        </el-button>
                    </div>
                </div>

                <!-- æ­¥éª¤3: éªŒè¯ç  -->
                <div v-if="!showSavedInfo" class="form-step" :class="{ active: currentStep === 3 }">
                    <div class="form-group">
                        <label class="form-label">éªŒè¯ç </label>
                        <el-input 
                            v-model="verificationCode" 
                            placeholder="è¯·è¾“å…¥æ”¶åˆ°çš„éªŒè¯ç "
                            type="text">
                        </el-input>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <el-button @click="prevStep" type="info">
                            ä¸Šä¸€æ­¥
                        </el-button>
                        <el-button @click="verifyCode" type="primary" :loading="verifying">
                            éªŒè¯
                        </el-button>
                    </div>
                </div>

                <!-- æ­¥éª¤4: ä¸¤æ­¥éªŒè¯ -->
                <div v-if="!showSavedInfo" class="form-step" :class="{ active: currentStep === 4 }">
                    <div class="form-group">
                        <label class="form-label">ä¸¤æ­¥éªŒè¯å¯†ç </label>
                        <el-input 
                            v-model="password" 
                            placeholder="è¯·è¾“å…¥ä¸¤æ­¥éªŒè¯å¯†ç "
                            type="password">
                        </el-input>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <el-button @click="prevStep" type="info">
                            ä¸Šä¸€æ­¥
                        </el-button>
                        <el-button @click="verifyPassword" type="primary" :loading="verifying">
                            éªŒè¯
                        </el-button>
                    </div>
                </div>

                <!-- æ­¥éª¤5: å®Œæˆ -->
                <div v-if="!showSavedInfo" class="form-step" :class="{ active: currentStep === 5 }">
                    <div style="text-align: center; margin: 30px 0;">
                        <div style="font-size: 4em; color: #00ff41; margin-bottom: 20px;">âœ…</div>
                        <h3 style="color: #00ff41; margin-bottom: 10px;">è®¤è¯æˆåŠŸï¼</h3>
                        <p style="color: #7fdbff;">Telegram å®¢æˆ·ç«¯å·²æˆåŠŸè¿æ¥</p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <el-button @click="goToMain" type="success">
                            è¿›å…¥ç³»ç»Ÿ
                        </el-button>
                    </div>
                </div>

                <!-- é”™è¯¯ä¿¡æ¯ -->
                <div v-if="errorMessage" class="error-message">
                    {{ errorMessage }}
                </div>
            </div>
        </div>
        
        <!-- çŠ¶æ€æ¶ˆæ¯ -->
        <div v-if="statusMessage" class="status-message" :class="statusType">
            {{ statusMessage }}
        </div>
        
        <!-- åŠ è½½é®ç½© -->
        <div v-if="loading" class="loading-overlay">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p style="margin-top: 15px; color: #00ff41;">{{ loadingMessage }}</p>
            </div>
        </div>
    </div>
</body>
</html> 