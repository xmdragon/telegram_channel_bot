<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿé…ç½®ç®¡ç† - æ˜Ÿé™…äº‰éœ¸é£æ ¼</title>
    <link rel="stylesheet" href="assets/css/element-plus.css">
    <link rel="stylesheet" href="assets/css/starcraft.css">
    <script src="assets/js/vue.js"></script>
    <script src="assets/js/element-plus.js"></script>
    <script src="assets/js/axios.js"></script>
    <style>
        /* æ˜Ÿé™…äº‰éœ¸é£æ ¼æ ·å¼ */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #00ff41;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* æ‰«æçº¿åŠ¨ç”» */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ff41, transparent);
            animation: scan 3s linear infinite;
            z-index: 1000;
        }
        
        @keyframes scan {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100vw); }
        }
        
        .app-container {
            min-height: 100vh;
            background: transparent;
        }
        
        .header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #00ff41;
            padding: 30px 0;
            border-bottom: 3px solid #00ff41;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 65, 0.1), transparent);
            animation: headerScan 4s linear infinite;
        }
        
        @keyframes headerScan {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 900;
            text-shadow: 0 0 20px #00ff41;
        }
        
        .header p {
            margin: 10px 0 0 0;
            color: #7fdbff;
            text-shadow: 0 0 10px #7fdbff;
            font-size: 1.2em;
        }
        
        .main-content {
            max-width: 1400px;
            margin: 20px auto;
            padding: 0 20px;
        }
        
        .config-card {
            background: rgba(26, 26, 46, 0.8);
            border: 2px solid #00ff41;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .config-card:hover {
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.3);
            transform: translateY(-3px);
        }
        
        .config-header {
            background: rgba(15, 52, 96, 0.8);
            padding: 20px;
            border-bottom: 2px solid #00ff41;
        }
        
        .config-header h2 {
            margin: 0;
            color: #00ff41;
            font-size: 1.5em;
            font-weight: 700;
            text-shadow: 0 0 10px #00ff41;
        }
        
        .config-content {
            padding: 20px;
        }
        
        .config-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .config-item {
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            background: #fafbfc;
        }
        
        .config-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .config-key {
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .config-type {
            background: #e3f2fd;
            color: #1976d2;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .config-description {
            color: #666;
            font-size: 12px;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }
        
        .status-message {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .status-success {
            background: #f0f9ff;
            color: #67C23A;
            border: 1px solid #c2e7b0;
        }
        
        .status-error {
            background: #fef0f0;
            color: #f56c6c;
            border: 1px solid #fbc4c4;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .loading-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
        }
        
        .category-tabs {
            margin-bottom: 20px;
        }
        
        .config-summary {
            background: rgba(26, 26, 46, 0.8);
            border: 2px solid #00ff41;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .config-summary:hover {
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.3);
            transform: translateY(-3px);
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .summary-item {
            text-align: center;
            padding: 15px;
            border-radius: 6px;
            background: #f8f9fa;
        }
        
        .summary-number {
            font-size: 2em;
            font-weight: 900;
            color: #00ff41;
            text-shadow: 0 0 15px #00ff41;
        }
        
        .summary-label {
            font-size: 14px;
            color: #7fdbff;
            margin-top: 5px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .nav-buttons {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }
        
        .channel-list {
            margin-top: 15px;
        }
        
        .channel-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 2px solid #00ff41;
            border-radius: 8px;
            margin-bottom: 10px;
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .channel-item:hover {
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
            transform: translateY(-2px);
        }
        
        .channel-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .channel-name {
            font-weight: 700;
            color: #00ff41;
            text-shadow: 0 0 10px #00ff41;
        }
        
        .channel-id {
            color: #7fdbff;
            font-size: 12px;
            font-weight: 500;
        }
        
        .keyword-list {
            margin-top: 15px;
        }
        
        .keyword-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            margin-bottom: 6px;
            background: white;
        }
        
        .keyword-text {
            font-weight: 500;
            color: #333;
        }
        
        .account-list {
            margin-top: 15px;
        }
        
        .account-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            margin-bottom: 8px;
            background: white;
        }
        
        .account-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .account-name {
            font-weight: 500;
            color: #333;
        }
        
        .add-form {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
        }
        
        .form-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .form-row:last-child {
            margin-bottom: 0;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .stat-number {
            font-size: 20px;
            font-weight: 600;
            color: #409EFF;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="app-container">
            <!-- å¤´éƒ¨ -->
            <div class="header">
                <div class="header-content">
                    <h1>âš™ï¸ ç³»ç»Ÿé…ç½®ç®¡ç†</h1>
                    <p>ç®¡ç† Telegram æ¶ˆæ¯å®¡æ ¸ç³»ç»Ÿçš„æ‰€æœ‰é…ç½®é¡¹ï¼ŒåŒ…æ‹¬é¢‘é“ç›‘å¬ã€è´¦å·é‡‡é›†å’Œå¹¿å‘Šè¿‡æ»¤</p>
                </div>
            </div>
            
            <!-- ä¸»è¦å†…å®¹ -->
            <div class="main-content">
                <!-- å¯¼èˆªæŒ‰é’® -->
                <div class="nav-buttons">
                    <el-button @click="goToMain">ğŸ  ä¸»ç•Œé¢</el-button>
                    <el-button @click="goToStatus">ğŸ“Š ç³»ç»ŸçŠ¶æ€</el-button>
                    <el-button @click="goToAuth">ğŸ” Telegram ç™»å½•</el-button>
                </div>
                
                <!-- é…ç½®æ¦‚è§ˆ -->
                <div class="config-summary">
                    <h3>ğŸ“‹ é…ç½®æ¦‚è§ˆ</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number">{{ channelStats.total }}</div>
                            <div class="stat-label">ç›‘å¬é¢‘é“</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ channelStats.active }}</div>
                            <div class="stat-label">å¯ç”¨é¢‘é“</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ keywordStats.text }}</div>
                            <div class="stat-label">æ–‡ä¸­å…³é”®è¯</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ keywordStats.line }}</div>
                            <div class="stat-label">è¡Œä¸­å…³é”®è¯</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ accountStats.collected }}</div>
                            <div class="stat-label">å·²é‡‡é›†è´¦å·</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ accountStats.blacklist }}</div>
                            <div class="stat-label">é»‘åå•è´¦å·</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">{{ accountStats.whitelist }}</div>
                            <div class="stat-label">ç™½åå•è´¦å·</div>
                        </div>
                    </div>
                </div>
                
                <!-- åˆ†ç±»æ ‡ç­¾é¡µ -->
                <div class="category-tabs">
                    <el-tabs v-model="activeTab" @tab-click="handleTabClick">
                        <!-- Telegram é…ç½® -->
                        <el-tab-pane label="ğŸ“± Telegram é…ç½®" name="telegram">
                            <div class="config-card">
                                <div class="config-header">
                                    <h2>Telegram API é…ç½®</h2>
                                    <p>é…ç½® Telegram API å‡­æ®å’Œè¿æ¥ä¿¡æ¯</p>
                                </div>
                                <div class="config-content">
                                    <div class="config-form">
                                        <div v-for="(config, key) in telegramConfigs" :key="key" class="config-item">
                                            <div class="config-item-header">
                                                <span class="config-key">{{ key }}</span>
                                                <span class="config-type">{{ config.config_type }}</span>
                                            </div>
                                            <div class="config-description">{{ config.description }}</div>
                                            <el-input 
                                                v-if="config.config_type === 'string'"
                                                v-model="config.value" 
                                                :placeholder="'è¯·è¾“å…¥ ' + key">
                                            </el-input>
                                            <el-input 
                                                v-else-if="config.config_type === 'password'"
                                                v-model="config.value" 
                                                type="password"
                                                :placeholder="'è¯·è¾“å…¥ ' + key">
                                            </el-input>
                                        </div>
                                    </div>
                                    <div class="actions">
                                        <el-button @click="saveTelegramConfigs" type="primary" :loading="saving">
                                            ä¿å­˜ Telegram é…ç½®
                                        </el-button>
                                        <el-button @click="resetTelegramConfigs">
                                            é‡ç½®ä¸ºé»˜è®¤å€¼
                                        </el-button>
                                    </div>
                                </div>
                            </div>
                        </el-tab-pane>
                        
                        <!-- é¢‘é“é…ç½® -->
                        <el-tab-pane label="ğŸ“º é¢‘é“ç›‘å¬" name="channels">
                            <div class="config-card">
                                <div class="config-header">
                                    <h2>é¢‘é“ç›‘å¬ç®¡ç†</h2>
                                    <p>ç®¡ç†ç›‘å¬çš„é¢‘é“åˆ—è¡¨å’ŒçŠ¶æ€</p>
                                </div>
                                <div class="config-content">
                                    <!-- æ·»åŠ é¢‘é“ -->
                                    <div class="add-form">
                                        <h4>æ·»åŠ ç›‘å¬é¢‘é“</h4>
                                                                <div class="form-row">
                            <el-input 
                                v-model="newChannel.id" 
                                placeholder="é¢‘é“IDæˆ–ç”¨æˆ·å"
                                style="flex: 1;">
                            </el-input>
                            <el-input 
                                v-model="newChannel.name" 
                                placeholder="é¢‘é“æ˜¾ç¤ºåç§°ï¼ˆå¯é€‰ï¼‰"
                                style="flex: 1;">
                            </el-input>
                            <el-input 
                                v-model="newChannel.description" 
                                placeholder="é¢‘é“æè¿°ï¼ˆå¯é€‰ï¼‰"
                                style="flex: 1;">
                            </el-input>
                            <el-button @click="addChannel" type="primary">
                                æ·»åŠ é¢‘é“
                            </el-button>
                        </div>
                                    </div>
                                    
                                    <!-- é¢‘é“åˆ—è¡¨ -->
                                    <div class="channel-list">
                                        <h4>ç›‘å¬é¢‘é“åˆ—è¡¨</h4>
                                        <div v-for="channel in channelList" :key="channel.id" class="channel-item">
                                            <div class="channel-info">
                                                <el-switch 
                                                    v-model="channel.enabled"
                                                    @change="updateChannelStatus(channel.id, channel.enabled)">
                                                </el-switch>
                                                <div>
                                                    <div class="channel-name">{{ channel.name || channel.id }}</div>
                                                    <div class="channel-id">{{ channel.id }}</div>
                                                </div>
                                            </div>
                                            <el-button @click="removeChannel(channel.id)" type="danger" size="small">
                                                ç§»é™¤
                                            </el-button>
                                        </div>
                                    </div>
                                    
                                    <!-- åŸºç¡€é…ç½® -->
                                    <div class="config-form" style="margin-top: 20px;">
                                        <div v-for="(config, key) in channelConfigs" :key="key" class="config-item">
                                            <div class="config-item-header">
                                                <span class="config-key">{{ key }}</span>
                                                <span class="config-type">{{ config.config_type }}</span>
                                            </div>
                                            <div class="config-description">{{ config.description }}</div>
                                            <el-input 
                                                v-if="config.config_type === 'string'"
                                                v-model="config.value" 
                                                :placeholder="'è¯·è¾“å…¥ ' + key">
                                            </el-input>
                                        </div>
                                    </div>
                                    <div class="actions">
                                        <el-button @click="saveChannelConfigs" type="primary" :loading="saving">
                                            ä¿å­˜é¢‘é“é…ç½®
                                        </el-button>
                                        <el-button @click="resetChannelConfigs">
                                            é‡ç½®ä¸ºé»˜è®¤å€¼
                                        </el-button>
                                    </div>
                                </div>
                            </div>
                        </el-tab-pane>
                        
                        <!-- è´¦å·é‡‡é›† -->
                        <el-tab-pane label="ğŸ‘¥ è´¦å·é‡‡é›†" name="accounts">
                            <div class="config-card">
                                <div class="config-header">
                                    <h2>è´¦å·é‡‡é›†ç®¡ç†</h2>
                                    <p>ç®¡ç†è´¦å·é‡‡é›†åŠŸèƒ½å’Œé»‘ç™½åå•</p>
                                </div>
                                <div class="config-content">
                                    <!-- åŸºç¡€è®¾ç½® -->
                                    <div class="config-form">
                                        <div v-for="(config, key) in accountsConfigs" :key="key" class="config-item">
                                            <div class="config-item-header">
                                                <span class="config-key">{{ key }}</span>
                                                <span class="config-type">{{ config.config_type }}</span>
                                            </div>
                                            <div class="config-description">{{ config.description }}</div>
                                            <el-switch 
                                                v-if="config.config_type === 'boolean'"
                                                v-model="config.value">
                                            </el-switch>
                                        </div>
                                    </div>
                                    
                                    <!-- ç™½åå•ç®¡ç† -->
                                    <div style="margin-top: 20px;">
                                        <h4>è´¦å·ç™½åå•</h4>
                                        <div class="add-form">
                                            <div class="form-row">
                                                <el-input 
                                                    v-model="newWhitelistAccount" 
                                                    placeholder="è¾“å…¥è´¦å·IDæˆ–ç”¨æˆ·å"
                                                    style="flex: 1;">
                                                </el-input>
                                                <el-button @click="addToWhitelist" type="success">
                                                    æ·»åŠ åˆ°ç™½åå•
                                                </el-button>
                                            </div>
                                        </div>
                                        <div class="account-list">
                                            <div v-for="account in whitelistAccounts" :key="account" class="account-item">
                                                <div class="account-info">
                                                    <span class="account-name">{{ account }}</span>
                                                </div>
                                                <el-button @click="removeFromWhitelist(account)" type="danger" size="small">
                                                    ç§»é™¤
                                                </el-button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- é»‘åå•ç®¡ç† -->
                                    <div style="margin-top: 20px;">
                                        <h4>è´¦å·é»‘åå•</h4>
                                        <div class="add-form">
                                            <div class="form-row">
                                                <el-input 
                                                    v-model="newBlacklistAccount" 
                                                    placeholder="è¾“å…¥è´¦å·IDæˆ–ç”¨æˆ·å"
                                                    style="flex: 1;">
                                                </el-input>
                                                <el-button @click="addToBlacklist" type="warning">
                                                    æ·»åŠ åˆ°é»‘åå•
                                                </el-button>
                                            </div>
                                        </div>
                                        <div class="account-list">
                                            <div v-for="account in blacklistAccounts" :key="account" class="account-item">
                                                <div class="account-info">
                                                    <span class="account-name">{{ account }}</span>
                                                </div>
                                                <el-button @click="removeFromBlacklist(account)" type="danger" size="small">
                                                    ç§»é™¤
                                                </el-button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="actions">
                                        <el-button @click="saveAccountsConfigs" type="primary" :loading="saving">
                                            ä¿å­˜è´¦å·é…ç½®
                                        </el-button>
                                        <el-button @click="resetAccountsConfigs">
                                            é‡ç½®ä¸ºé»˜è®¤å€¼
                                        </el-button>
                                    </div>
                                </div>
                            </div>
                        </el-tab-pane>
                        
                        <!-- å¹¿å‘Šè¿‡æ»¤ -->
                        <el-tab-pane label="ğŸ” å¹¿å‘Šè¿‡æ»¤" name="filter">
                            <div class="config-card">
                                <div class="config-header">
                                    <h2>å¹¿å‘Šè¿‡æ»¤é…ç½®</h2>
                                    <p>é…ç½®æ¶ˆæ¯è¿‡æ»¤è§„åˆ™å’Œå…³é”®è¯</p>
                                </div>
                                <div class="config-content">
                                    <!-- åŸºç¡€è®¾ç½® -->
                                    <div class="config-form">
                                        <div v-for="(config, key) in reviewConfigs" :key="key" class="config-item">
                                            <div class="config-item-header">
                                                <span class="config-key">{{ key }}</span>
                                                <span class="config-type">{{ config.config_type }}</span>
                                            </div>
                                            <div class="config-description">{{ config.description }}</div>
                                            <el-switch 
                                                v-if="config.config_type === 'boolean'"
                                                v-model="config.value">
                                            </el-switch>
                                            <el-input-number 
                                                v-else-if="config.config_type === 'integer'"
                                                v-model="config.value" 
                                                :min="0"
                                                :max="10000">
                                            </el-input-number>
                                        </div>
                                    </div>
                                    
                                    <!-- æ–‡ä¸­å…³é”®è¯ -->
                                    <div style="margin-top: 20px;">
                                        <h4>æ–‡ä¸­è¿‡æ»¤å…³é”®è¯ï¼ˆæ¶ˆæ¯å†…å®¹åŒ…å«è¿™äº›å…³é”®è¯æ—¶è¿‡æ»¤ï¼‰</h4>
                                        <div class="add-form">
                                            <div class="form-row">
                                                <el-input 
                                                    v-model="newTextKeyword" 
                                                    placeholder="è¾“å…¥å…³é”®è¯"
                                                    style="flex: 1;">
                                                </el-input>
                                                <el-button @click="addTextKeyword" type="primary">
                                                    æ·»åŠ å…³é”®è¯
                                                </el-button>
                                            </div>
                                        </div>
                                        <div class="keyword-list">
                                            <div v-for="keyword in textKeywords" :key="keyword" class="keyword-item">
                                                <span class="keyword-text">{{ keyword }}</span>
                                                <el-button @click="removeTextKeyword(keyword)" type="danger" size="small">
                                                    åˆ é™¤
                                                </el-button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- è¡Œä¸­å…³é”®è¯ -->
                                    <div style="margin-top: 20px;">
                                        <h4>è¡Œä¸­è¿‡æ»¤å…³é”®è¯ï¼ˆæ¶ˆæ¯è¡ŒåŒ…å«è¿™äº›å…³é”®è¯æ—¶è¿‡æ»¤æ•´è¡Œï¼‰</h4>
                                        <div class="add-form">
                                            <div class="form-row">
                                                <el-input 
                                                    v-model="newLineKeyword" 
                                                    placeholder="è¾“å…¥å…³é”®è¯"
                                                    style="flex: 1;">
                                                </el-input>
                                                <el-button @click="addLineKeyword" type="primary">
                                                    æ·»åŠ å…³é”®è¯
                                                </el-button>
                                            </div>
                                        </div>
                                        <div class="keyword-list">
                                            <div v-for="keyword in lineKeywords" :key="keyword" class="keyword-item">
                                                <span class="keyword-text">{{ keyword }}</span>
                                                <el-button @click="removeLineKeyword(keyword)" type="danger" size="small">
                                                    åˆ é™¤
                                                </el-button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="actions">
                                        <el-button @click="saveFilterConfigs" type="primary" :loading="saving">
                                            ä¿å­˜è¿‡æ»¤é…ç½®
                                        </el-button>
                                        <el-button @click="resetFilterConfigs">
                                            é‡ç½®ä¸ºé»˜è®¤å€¼
                                        </el-button>
                                    </div>
                                </div>
                            </div>
                        </el-tab-pane>
                        
                        <!-- ç³»ç»Ÿé…ç½® -->
                        <el-tab-pane label="ğŸ”§ ç³»ç»Ÿé…ç½®" name="system">
                            <div class="config-card">
                                <div class="config-header">
                                    <h2>ç³»ç»Ÿé«˜çº§é…ç½®</h2>
                                    <p>é…ç½®ç³»ç»Ÿè¿è¡Œå‚æ•°å’Œé«˜çº§è®¾ç½®</p>
                                </div>
                                <div class="config-content">
                                    <div class="config-form">
                                        <div v-for="(config, key) in systemConfigs" :key="key" class="config-item">
                                            <div class="config-item-header">
                                                <span class="config-key">{{ key }}</span>
                                                <span class="config-type">{{ config.config_type }}</span>
                                            </div>
                                            <div class="config-description">{{ config.description }}</div>
                                            <el-input 
                                                v-if="config.config_type === 'string'"
                                                v-model="config.value" 
                                                :placeholder="'è¯·è¾“å…¥ ' + key">
                                            </el-input>
                                        </div>
                                    </div>
                                    <div class="actions">
                                        <el-button @click="saveSystemConfigs" type="primary" :loading="saving">
                                            ä¿å­˜ç³»ç»Ÿé…ç½®
                                        </el-button>
                                        <el-button @click="reloadConfigs" type="info" :loading="reloading">
                                            é‡æ–°åŠ è½½é…ç½®
                                        </el-button>
                                        <el-button @click="resetAllConfigs" type="warning">
                                            é‡ç½®æ‰€æœ‰é…ç½®
                                        </el-button>
                                        <el-button @click="exportConfigs">
                                            å¯¼å‡ºé…ç½®
                                        </el-button>
                                        <el-button @click="importConfigs">
                                            å¯¼å…¥é…ç½®
                                        </el-button>
                                    </div>
                                </div>
                            </div>
                        </el-tab-pane>
                    </el-tabs>
                </div>
                
                <!-- çŠ¶æ€æ¶ˆæ¯ -->
                <div v-if="statusMessage" class="status-message" :class="statusType">
                    {{ statusMessage }}
                </div>
            </div>
        </div>
        
        <!-- åŠ è½½é®ç½© -->
        <div v-if="loading" class="loading-overlay">
            <div class="loading-content">
                <el-icon class="is-loading" style="font-size: 24px; color: #409EFF;">
                    <Loading />
                </el-icon>
                <p style="margin-top: 15px;">{{ loadingMessage }}</p>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        const { ElMessage } = ElementPlus;

        createApp({
            data() {
                return {
                    loading: false,
                    loadingMessage: '',
                    saving: false,
                    reloading: false,
                    statusMessage: '',
                    statusType: 'success',
                    activeTab: 'telegram',
                    
                    // é…ç½®æ•°æ®
                    allConfigs: {},
                    telegramConfigs: {},
                    channelConfigs: {},
                    accountsConfigs: {},
                    filterConfigs: {},
                    reviewConfigs: {},
                    systemConfigs: {},
                    
                    // é¢‘é“ç®¡ç†
                    newChannel: { id: '', name: '', description: '' },
                    channelList: [],
                    
                    // å…³é”®è¯ç®¡ç†
                    newTextKeyword: '',
                    newLineKeyword: '',
                    textKeywords: [],
                    lineKeywords: [],
                    
                    // è´¦å·ç®¡ç†
                    newWhitelistAccount: '',
                    newBlacklistAccount: '',
                    whitelistAccounts: [],
                    blacklistAccounts: [],
                    
                    // ç»Ÿè®¡ä¿¡æ¯
                    channelStats: { total: 0, active: 0 },
                    keywordStats: { text: 0, line: 0 },
                    accountStats: { collected: 0, blacklist: 0, whitelist: 0 }
                }
            },
            mounted() {
                this.loadConfigs();
            },
            methods: {
                async loadConfigs() {
                    this.loading = true;
                    this.loadingMessage = 'æ­£åœ¨åŠ è½½é…ç½®...';
                    
                    try {
                        const response = await axios.get('/api/config/');
                        if (response.data.success) {
                            this.allConfigs = response.data.configs;
                            this.categorizeConfigs();
                            await this.updateChannelList();
                            this.updateKeywordLists();
                            this.updateAccountLists();
                            this.updateStats();
                        } else {
                            this.showError('åŠ è½½é…ç½®å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('åŠ è½½é…ç½®å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    } finally {
                        this.loading = false;
                    }
                },
                
                categorizeConfigs() {
                    this.telegramConfigs = {};
                    this.channelConfigs = {};
                    this.accountsConfigs = {};
                    this.filterConfigs = {};
                    this.reviewConfigs = {};
                    this.systemConfigs = {};
                    
                    for (const [key, config] of Object.entries(this.allConfigs)) {
                        // ç¡®ä¿é…ç½®é¡¹æœ‰æ­£ç¡®çš„ç»“æ„
                        const configItem = {
                            value: config.value,
                            description: config.description || '',
                            config_type: config.config_type || 'string'
                        };
                        
                        if (key.startsWith('telegram.')) {
                            this.telegramConfigs[key] = configItem;
                        } else if (key.startsWith('channels.')) {
                            this.channelConfigs[key] = configItem;
                        } else if (key.startsWith('accounts.')) {
                            this.accountsConfigs[key] = configItem;
                        } else if (key.startsWith('filter.')) {
                            this.filterConfigs[key] = configItem;
                        } else if (key.startsWith('review.')) {
                            this.reviewConfigs[key] = configItem;
                        } else if (key.startsWith('system.')) {
                            this.systemConfigs[key] = configItem;
                        }
                    }
                },
                
                async updateChannelList() {
                    try {
                        const response = await axios.get('/api/config/channels/');
                        if (response.data.success) {
                            this.channelList = response.data.channels.map(channel => ({
                                id: channel.channel_id,
                                name: channel.channel_name,
                                enabled: channel.is_active,
                                description: channel.description
                            }));
                        }
                    } catch (error) {
                        console.error('è·å–é¢‘é“åˆ—è¡¨å¤±è´¥:', error);
                        this.channelList = [];
                    }
                },
                
                updateKeywordLists() {
                    this.textKeywords = this.allConfigs['filter.ad_keywords_text']?.value || [];
                    this.lineKeywords = this.allConfigs['filter.ad_keywords_line']?.value || [];
                },
                
                updateAccountLists() {
                    this.whitelistAccounts = this.allConfigs['accounts.account_whitelist']?.value || [];
                    this.blacklistAccounts = this.allConfigs['accounts.account_blacklist']?.value || [];
                },
                
                updateStats() {
                    // é¢‘é“ç»Ÿè®¡
                    this.channelStats.total = this.channelList.length;
                    this.channelStats.active = this.channelList.filter(c => c.enabled).length;
                    
                    // å…³é”®è¯ç»Ÿè®¡
                    this.keywordStats.text = this.textKeywords.length;
                    this.keywordStats.line = this.lineKeywords.length;
                    
                    // è´¦å·ç»Ÿè®¡
                    this.accountStats.collected = this.allConfigs['accounts.collected_accounts']?.value?.length || 0;
                    this.accountStats.blacklist = this.blacklistAccounts.length;
                    this.accountStats.whitelist = this.whitelistAccounts.length;
                },
                
                // é¢‘é“ç®¡ç†
                async addChannel() {
                    if (!this.newChannel.id) {
                        this.showError('è¯·è¾“å…¥é¢‘é“ID');
                        return;
                    }
                    
                    try {
                        const response = await axios.post('/api/config/channels/add', {
                            channel_id: this.newChannel.id,
                            channel_name: this.newChannel.name,
                            description: this.newChannel.description || ''
                        });
                        
                        if (response.data.success) {
                            this.showSuccess('é¢‘é“æ·»åŠ æˆåŠŸ');
                            this.newChannel = { id: '', name: '', description: '' };
                            await this.updateChannelList();
                        } else {
                            this.showError('é¢‘é“æ·»åŠ å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('é¢‘é“æ·»åŠ å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                async removeChannel(channelId) {
                    try {
                        const response = await axios.delete(`/api/config/channels/${channelId}`);
                        
                        if (response.data.success) {
                            this.showSuccess('é¢‘é“ç§»é™¤æˆåŠŸ');
                            await this.updateChannelList();
                        } else {
                            this.showError('é¢‘é“ç§»é™¤å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('é¢‘é“ç§»é™¤å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                async updateChannelStatus(channelId, enabled) {
                    try {
                        const response = await axios.put(`/api/config/channels/${channelId}/status`, {
                            enabled: enabled
                        });
                        
                        if (response.data.success) {
                            this.showSuccess('é¢‘é“çŠ¶æ€æ›´æ–°æˆåŠŸ');
                            await this.updateChannelList();
                        } else {
                            this.showError('é¢‘é“çŠ¶æ€æ›´æ–°å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('é¢‘é“çŠ¶æ€æ›´æ–°å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                // å…³é”®è¯ç®¡ç†
                async addTextKeyword() {
                    if (!this.newTextKeyword) {
                        this.showError('è¯·è¾“å…¥å…³é”®è¯');
                        return;
                    }
                    
                    try {
                        const response = await axios.post('/api/config/keywords/text/add', {
                            keyword: this.newTextKeyword
                        });
                        
                        if (response.data.success) {
                            this.showSuccess('å…³é”®è¯æ·»åŠ æˆåŠŸ');
                            this.newTextKeyword = '';
                            await this.loadConfigs();
                        } else {
                            this.showError('å…³é”®è¯æ·»åŠ å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('å…³é”®è¯æ·»åŠ å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                async removeTextKeyword(keyword) {
                    try {
                        const response = await axios.delete(`/api/config/keywords/text/${encodeURIComponent(keyword)}`);
                        
                        if (response.data.success) {
                            this.showSuccess('å…³é”®è¯ç§»é™¤æˆåŠŸ');
                            await this.loadConfigs();
                        } else {
                            this.showError('å…³é”®è¯ç§»é™¤å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('å…³é”®è¯ç§»é™¤å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                async addLineKeyword() {
                    if (!this.newLineKeyword) {
                        this.showError('è¯·è¾“å…¥å…³é”®è¯');
                        return;
                    }
                    
                    try {
                        const response = await axios.post('/api/config/keywords/line/add', {
                            keyword: this.newLineKeyword
                        });
                        
                        if (response.data.success) {
                            this.showSuccess('å…³é”®è¯æ·»åŠ æˆåŠŸ');
                            this.newLineKeyword = '';
                            await this.loadConfigs();
                        } else {
                            this.showError('å…³é”®è¯æ·»åŠ å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('å…³é”®è¯æ·»åŠ å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                async removeLineKeyword(keyword) {
                    try {
                        const response = await axios.delete(`/api/config/keywords/line/${encodeURIComponent(keyword)}`);
                        
                        if (response.data.success) {
                            this.showSuccess('å…³é”®è¯ç§»é™¤æˆåŠŸ');
                            await this.loadConfigs();
                        } else {
                            this.showError('å…³é”®è¯ç§»é™¤å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('å…³é”®è¯ç§»é™¤å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                // è´¦å·ç®¡ç†
                async addToWhitelist() {
                    if (!this.newWhitelistAccount) {
                        this.showError('è¯·è¾“å…¥è´¦å·');
                        return;
                    }
                    
                    try {
                        const response = await axios.post('/api/config/accounts/whitelist/add', {
                            account: this.newWhitelistAccount
                        });
                        
                        if (response.data.success) {
                            this.showSuccess('è´¦å·æ·»åŠ åˆ°ç™½åå•æˆåŠŸ');
                            this.newWhitelistAccount = '';
                            await this.loadConfigs();
                        } else {
                            this.showError('æ·»åŠ è´¦å·åˆ°ç™½åå•å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('æ·»åŠ è´¦å·åˆ°ç™½åå•å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                async removeFromWhitelist(account) {
                    try {
                        const response = await axios.delete(`/api/config/accounts/whitelist/${encodeURIComponent(account)}`);
                        
                        if (response.data.success) {
                            this.showSuccess('è´¦å·ä»ç™½åå•ç§»é™¤æˆåŠŸ');
                            await this.loadConfigs();
                        } else {
                            this.showError('ä»ç™½åå•ç§»é™¤è´¦å·å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('ä»ç™½åå•ç§»é™¤è´¦å·å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                async addToBlacklist() {
                    if (!this.newBlacklistAccount) {
                        this.showError('è¯·è¾“å…¥è´¦å·');
                        return;
                    }
                    
                    try {
                        const response = await axios.post('/api/config/accounts/blacklist/add', {
                            account: this.newBlacklistAccount
                        });
                        
                        if (response.data.success) {
                            this.showSuccess('è´¦å·æ·»åŠ åˆ°é»‘åå•æˆåŠŸ');
                            this.newBlacklistAccount = '';
                            await this.loadConfigs();
                        } else {
                            this.showError('æ·»åŠ è´¦å·åˆ°é»‘åå•å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('æ·»åŠ è´¦å·åˆ°é»‘åå•å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                async removeFromBlacklist(account) {
                    try {
                        const response = await axios.delete(`/api/config/accounts/blacklist/${encodeURIComponent(account)}`);
                        
                        if (response.data.success) {
                            this.showSuccess('è´¦å·ä»é»‘åå•ç§»é™¤æˆåŠŸ');
                            await this.loadConfigs();
                        } else {
                            this.showError('ä»é»‘åå•ç§»é™¤è´¦å·å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('ä»é»‘åå•ç§»é™¤è´¦å·å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    }
                },
                
                // é…ç½®ä¿å­˜
                async saveTelegramConfigs() {
                    await this.saveConfigs(this.telegramConfigs, 'Telegram');
                },
                
                async saveChannelConfigs() {
                    await this.saveConfigs(this.channelConfigs, 'é¢‘é“');
                },
                
                async saveAccountsConfigs() {
                    await this.saveConfigs(this.accountsConfigs, 'è´¦å·');
                },
                
                async saveFilterConfigs() {
                    await this.saveConfigs(this.filterConfigs, 'è¿‡æ»¤');
                },
                
                async saveSystemConfigs() {
                    await this.saveConfigs(this.systemConfigs, 'ç³»ç»Ÿ');
                },
                
                async saveConfigs(configs, category) {
                    this.saving = true;
                    
                    try {
                        const configItems = Object.entries(configs).map(([key, config]) => ({
                            key: key,
                            value: config.value,
                            description: config.description,
                            config_type: config.config_type
                        }));
                        
                        const response = await axios.post('/api/config/batch-update', configItems);
                        
                        if (response.data.success) {
                            this.showSuccess(`${category}é…ç½®ä¿å­˜æˆåŠŸ`);
                            await this.loadConfigs(); // é‡æ–°åŠ è½½é…ç½®
                        } else {
                            this.showError(`${category}é…ç½®ä¿å­˜å¤±è´¥`);
                        }
                    } catch (error) {
                        this.showError(`${category}é…ç½®ä¿å­˜å¤±è´¥: ` + (error.response?.data?.detail || error.message));
                    } finally {
                        this.saving = false;
                    }
                },
                
                async resetTelegramConfigs() {
                    await this.resetConfigs('telegram', 'Telegram');
                },
                
                async resetChannelConfigs() {
                    await this.resetConfigs('channels', 'é¢‘é“');
                },
                
                async resetAccountsConfigs() {
                    await this.resetConfigs('accounts', 'è´¦å·');
                },
                
                async resetFilterConfigs() {
                    await this.resetConfigs('filter', 'è¿‡æ»¤');
                },
                
                async resetConfigs(category, categoryName) {
                    try {
                        const response = await axios.post(`/api/config/categories/${category}`);
                        
                        if (response.data.success) {
                            this.showSuccess(`${categoryName}é…ç½®é‡ç½®æˆåŠŸ`);
                            await this.loadConfigs(); // é‡æ–°åŠ è½½é…ç½®
                        } else {
                            this.showError(`${categoryName}é…ç½®é‡ç½®å¤±è´¥`);
                        }
                    } catch (error) {
                        this.showError(`${categoryName}é…ç½®é‡ç½®å¤±è´¥: ` + (error.response?.data?.detail || error.message));
                    }
                },
                
                async reloadConfigs() {
                    this.reloading = true;
                    
                    try {
                        const response = await axios.post('/api/config/reload');
                        
                        if (response.data.success) {
                            this.showSuccess('é…ç½®é‡æ–°åŠ è½½æˆåŠŸ');
                            await this.loadConfigs(); // é‡æ–°åŠ è½½é…ç½®
                        } else {
                            this.showError('é…ç½®é‡æ–°åŠ è½½å¤±è´¥');
                        }
                    } catch (error) {
                        this.showError('é…ç½®é‡æ–°åŠ è½½å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                    } finally {
                        this.reloading = false;
                    }
                },
                
                async resetAllConfigs() {
                    try {
                        const confirmed = await this.$confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰é…ç½®ä¸ºé»˜è®¤å€¼å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚', 'ç¡®è®¤é‡ç½®', {
                            confirmButtonText: 'ç¡®å®š',
                            cancelButtonText: 'å–æ¶ˆ',
                            type: 'warning'
                        });
                        
                        if (confirmed) {
                            const response = await axios.post('/api/config/reset-defaults');
                            
                            if (response.data.success) {
                                this.showSuccess('æ‰€æœ‰é…ç½®é‡ç½®æˆåŠŸ');
                                await this.loadConfigs(); // é‡æ–°åŠ è½½é…ç½®
                            } else {
                                this.showError('é…ç½®é‡ç½®å¤±è´¥');
                            }
                        }
                    } catch (error) {
                        if (error !== 'cancel') {
                            this.showError('é…ç½®é‡ç½®å¤±è´¥: ' + (error.response?.data?.detail || error.message));
                        }
                    }
                },
                
                exportConfigs() {
                    const configData = {
                        timestamp: new Date().toISOString(),
                        configs: this.allConfigs
                    };
                    
                    const dataStr = JSON.stringify(configData, null, 2);
                    const dataBlob = new Blob([dataStr], { type: 'application/json' });
                    
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(dataBlob);
                    link.download = `telegram_config_${new Date().toISOString().split('T')[0]}.json`;
                    link.click();
                    
                    this.showSuccess('é…ç½®å¯¼å‡ºæˆåŠŸ');
                },
                
                importConfigs() {
                    const input = document.createElement('input');
                    input.type = 'file';
                    input.accept = '.json';
                    
                    input.onchange = async (event) => {
                        const file = event.target.files[0];
                        if (!file) return;
                        
                        try {
                            const text = await file.text();
                            const configData = JSON.parse(text);
                            
                            if (configData.configs) {
                                // è¿™é‡Œå¯ä»¥å®ç°å¯¼å…¥é€»è¾‘
                                this.showSuccess('é…ç½®å¯¼å…¥åŠŸèƒ½å¼€å‘ä¸­...');
                            } else {
                                this.showError('é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯');
                            }
                        } catch (error) {
                            this.showError('é…ç½®æ–‡ä»¶è¯»å–å¤±è´¥: ' + error.message);
                        }
                    };
                    
                    input.click();
                },
                
                handleTabClick(tab) {
                    this.activeTab = tab.name;
                },
                
                goToMain() {
                    window.location.href = '/';
                },
                
                goToStatus() {
                    window.location.href = '/status';
                },
                
                goToAuth() {
                    window.location.href = '/auth';
                },
                
                showSuccess(message) {
                    this.statusMessage = message;
                    this.statusType = 'success';
                    setTimeout(() => {
                        this.statusMessage = '';
                    }, 3000);
                },
                
                showError(message) {
                    this.statusMessage = message;
                    this.statusType = 'error';
                    setTimeout(() => {
                        this.statusMessage = '';
                    }, 5000);
                }
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>